<?php
$lang_presets = array(
	array(
		'code' => 'de',
		'language' => 'Deutsch',
		'sendername' => '',
		'anrede' => 'Anrede',
		'title_0' => 'Herr',
		'title_1' => 'Frau',
		'grad' => 'Titel',
		'firstname' => 'Vorname',
		'lastname' => 'Nachname',
		'email' => 'E-Mail',
		'select_newsletter' => 'Newsletter auswählen',
		'compulsory' => 'Felder mit einem * müssen ausgefüllt werden.',
		'subscribe' => 'Newsletter abonnieren',
		'action' => 'Möchten Sie regelmäßig informiert werden? Dann abonnieren Sie unseren interessanten Newsletter:',
		'safety' => 'Bei der Newsletterbestellung erhalten Sie aus rechtlichen Gründen eine E-Mail mit einem Bestätigungslink.',
		'status1' => 'Ab sofort erhalten Sie unseren Newsletter.',
		'no_userdata' => 'Die eingegebenen Daten waren ungültig, bitte nochmal prüfen, ob alle Formularfelder korrekt ausgefüllt sind.',
		'invalid_email' => 'Die eingegebene E-Mailadresse ist nicht korrekt.',
		'invalid_firstname' => 'Bitte geben Sie Ihren Vornamen ein.',
		'invalid_lastname' => 'Bitte geben Sie Ihren Nachnamen ein.',
		'send_error' => 'Sendefehler - Überprüfen Sie die Einstellungen im PHP-Mailer-Addon.',
		'software_failure' => 'Es gab ein Software-Problem - bitte kontaktieren Sie den Webmaster!',
		'nogroup_selected' => 'Sie haben keinen Newsletter ausgewählt! Bitte wählen Sie, für welchen Newsletter Sie sich anmelden möchten!',
		'already_subscribed' => 'Sie sind bereits für unseren Newsletter eingetragen.',
		'confirmation_sent' => 'Ihnen wurde soeben eine Bestätigungs-E-Mail geschickt. Ihre Anfrage wird erst fertiggestellt, wenn Sie den in der E-Mail enthaltenen Link geklickt haben.',
		'confirmsubject' => 'Bitte bestätigen Sie Ihre Newsletter Anmeldung',
		'confirmcontent' => '<p>Hallo +++TITLE+++ +++GRAD+++ +++FIRSTNAME+++ +++LASTNAME+++,</p><br>
<p>bitte bestätigen Sie aus Sicherheitsgründen Ihre Anmeldung zum Newsletter. Klicken Sie dazu einfach auf den folgenden Link:  <a href=\\"+++AKTIVIERUNGSLINK+++\\">+++AKTIVIERUNGSLINK+++</a></p><br>
<p>TIPP: Damit unsere E-Mails nicht ungewollt in den Spam-Ordner verschoben oder gelöscht werden, nehmen Sie uns einfach in Ihr persönliches Adressbuch auf.</p>
<p>Dazu klicken Sie je nach verwendetem E-Mail-Programm entweder</p>
<ul><li>auf den entsprechenden Adressbuch-Link neben der Absenderadresse oder</li><li>mit der rechten Maustaste oben auf die Absenderadresse und wählen im daraufhin erscheinenden Pop-up-Menü den Punkt „Zum Adressbuch hinzufügen“.</li></ul>
<p>So entgeht Ihnen garantiert keine Ausgabe unseres Newsletters!</p><br>
<p>Falls Sie den Newsletter nicht erhalten wollen, brauchen Sie nichts zu tun.</p><br>
<p>Vielen Dank,</p><br>
<p>Ihr Newsletter Team</p>',
		'already_confirmed' => 'Sie haben die letzte Aktion scheinbar schon bestätigt.',
		'invalid_key' => 'Der übermittelte Sicherheitscode war ungültig. Haben Sie eventuell einen neuen Code erhalten?',
		'confirmation_successful' => '<p>Vielen Dank für Ihre Bestätigung! Ihre E-Mail Adresse wurde angemeldet.</p>',
		'unsubscribe' => 'Newsletter abbestellen',
		'status0' => 'Sie erhalten ab sofort keinen Newsletter mehr von uns, können sich aber jederzeit wieder anmelden.',
		'already_unsubscribed' => 'Sie sind bereits für einen Newsletter ausgetragen.',
		'user_not_found' => 'Leider konnten wir Ihre Daten nicht in unserer Datenbank finden.',
	),
	array(
		'code' => 'en',
		'language' => 'English',
		'sendername' => '',
		'anrede' => 'Form of address',
		'title_0' => 'Mr.',
		'title_1' => 'Mrs.',
		'grad' => 'Academic title',
		'firstname' => 'First name',
		'lastname' => 'Last name',
		'email' => 'E-Mail',
		'select_newsletter' => 'Select newsletter',
		'compulsory' => 'Fields marked * must be compulsorily filled.',
		'subscribe' => 'Subscribe newsletter',
		'action' => 'Do you want to be regularly informed? Then subscribe to our interesting newsletter:',
		'safety' => 'For legal reasons, you will receive an e-mail with a confirmation link. Your subscription will be completed after clicking the link.',
		'status1' => 'You will receive our newsletter from now on.',
		'no_userdata' => 'The entered data was invalid. Please recheck if all fields are filled in correct.',
		'invalid_email' => 'The e-mail address is invalid.',
		'invalid_firstname' => 'Please enter you first name.',
		'invalid_lastname' => 'Please enter your last name.',
		'send_error' => 'Send Failure - Please check PHP-Mailer-Addon settings.',
		'software_failure' => 'Software problem occured - please contact the Webmaster!',
		'nogroup_selected' => 'No newsletter selected. Please select which newsletter you want to subscribe!',
		'already_subscribed' => 'You already subscribed this newsletter.',
		'confirmation_sent' => 'We sent a confirmation mail to the submitted e-mail address. Your request will be completed by clicking on the link in the mail.',
		'confirmsubject' => 'Please confirm your registration',
		'confirmcontent' => '<p>Dear +++TITLE+++ +++GRAD+++ +++FIRSTNAME+++ +++LASTNAME+++,</p><br>
<p>for legal reasons – please confirm your newsletter registration by clicking on the following link: <a href=\\"+++AKTIVIERUNGSLINK+++\\">+++AKTIVIERUNGSLINK+++</a></p>
<p>HINT: Just to ensure that our E-mails are not inadvertently pushed to the spam folder or deleted, please simply add us in your personal address book.</p>
<p>For this, click on either of the following, depending on the used E-Mail program:</p>
<ul><li>on the corresponding address book link near the sender address or</li><li>right click the mouse over the sender address and on the displayed Pop-up menu, select the item "Add sender to address book".</li></ul>
<p>This will ensure that you do not miss any edition of our Newsletters!</p>
<p>If you don’t want to receive this Newsletter, you don’t need to do anything. You will need to click on the link to confirm that you wish to subscribe.</p><br>
<p>Sincerely, yours</p><br>
<p>Newsletter-Team</p>',
		'already_confirmed' => 'You already entered the last action.',
		'invalid_key' => 'The submitted security code was invalid. Did you already receive a new code?',
		'confirmation_successful' => 'Your confirmation was successful.',
		'unsubscribe' => 'Unsubscribe Newsletter',
		'status0' => 'You successfully unsubscribed. You can subscribe again at any time.',
		'already_unsubscribed' => 'You already unsubscribed this newsletter.',
		'user_not_found' => 'Sorry, we are not able to find your data in our database.',
	),
);

// save settings
if (filter_input(INPUT_POST, "btn_save") == "Speichern") {
	$settings = (array) rex_post('settings', 'array', array());

	// Linkmap Link braucht besondere Behandlung
	$link_ids = filter_input_array(INPUT_POST, array('REX_INPUT_LINK'=> array('filter' => FILTER_VALIDATE_INT, 'flags' => FILTER_REQUIRE_ARRAY)));
	$link_names = filter_input_array(INPUT_POST, array('REX_LINK_NAME' => array('flags' => FILTER_REQUIRE_ARRAY)));

	$settings['link'] = $link_ids["REX_INPUT_LINK"][1];
	$settings['linkname'] = trim($link_names["REX_LINK_NAME"][1]);
	$settings['link_abmeldung'] = $link_ids["REX_INPUT_LINK"][2];
	$settings['linkname_abmeldung'] = trim($link_names["REX_LINK_NAME"][2]);
	$settings['default_test_article'] = $link_ids["REX_INPUT_LINK"][3];
	$settings['default_test_article_name'] = trim($link_names["REX_LINK_NAME"][3]);
	
	// Save settings
	rex_config::set("multinewsletter", $settings);
}
?>
<form action="<?php print rex_url::currentBackendPage(); ?>" method="post">
	<div class="panel panel-edit">
		<header class="panel-heading"><div class="panel-title"><?php print rex_i18n::msg('multinewsletter_menu_config'); ?></div></header>
		<div class="panel-body">
			<fieldset>
				<legend><?php echo rex_i18n::msg('multinewsletter_config_title_standards'); ?></legend>
				<div class="panel-body-wrapper slide">
					<dl class="rex-form-group form-group">
						<dt><label for="sender"><?php print rex_i18n::msg('multinewsletter_config_sender'); ?></label></dt>
						<dd><input class="form-control" id="sender" type="email" name="settings[sender]" value="<?php echo $this->getConfig('sender'); ?>" /></dd>
					</dl>	
					<dl class="rex-form-group form-group">
						<dt><label for="REX_LINK_1_NAME"><?php print rex_i18n::msg('multinewsletter_config_link'); ?></label></dt>
						<dd>
							<div class="input-group">
								<input class="form-control" type="text" name="REX_LINK_NAME[1]" value="<?php echo $this->getConfig('linkname'); ?>" id="REX_LINK_1_NAME" readonly="readonly">
								<input type="hidden" name="REX_INPUT_LINK[1]" id="REX_LINK_1" value="<?php echo $this->getConfig('link'); ?>">
								<span class="input-group-btn">
									<a href="#" class="btn btn-popup" onclick="openLinkMap('REX_LINK_1', '&amp;category_id=<?php print $this->getConfig('link'); ?>');return false;" title="<?php print rex_i18n::msg('multinewsletter_config_open_linkmap'); ?>"><i class="rex-icon rex-icon-open-linkmap"></i></a>
									<a href="#" class="btn btn-popup" onclick="deleteREXLink(1);return false;" title="<?php print rex_i18n::msg('multinewsletter_config_remove_link'); ?>"><i class="rex-icon rex-icon-delete-link"></i></a>
								</span>
							</div>
						</dd>
					</dl>	
					<dl class="rex-form-group form-group">
						<dt><label for="REX_LINK_2_NAME"><?php print rex_i18n::msg('multinewsletter_config_link_abmeldung'); ?></label></dt>
						<dd>
							<div class="input-group">
								<input class="form-control" type="text" name="REX_LINK_NAME[2]" value="<?php echo $this->getConfig('linkname_abmeldung'); ?>" id="REX_LINK_2_NAME" readonly="readonly">
								<input type="hidden" name="REX_INPUT_LINK[2]" id="REX_LINK_2" value="<?php echo $this->getConfig('link_abmeldung'); ?>">
								<span class="input-group-btn">
									<a href="#" class="btn btn-popup" onclick="openLinkMap('REX_LINK_2', '&amp;category_id=<?php print $this->getConfig('link'); ?>');return false;" title="<?php print rex_i18n::msg('multinewsletter_config_open_linkmap'); ?>"><i class="rex-icon rex-icon-open-linkmap"></i></a>
									<a href="#" class="btn btn-popup" onclick="deleteREXLink(2);return false;" title="<?php print rex_i18n::msg('multinewsletter_config_remove_link'); ?>"><i class="rex-icon rex-icon-delete-link"></i></a>
								</span>
							</div>
						</dd>
					</dl>
					<?php 
						// Fallback Sprache Auswahlfeld
						if(count(rex_clang::getAll()) > 1) {
					?>
					<dl class="rex-form-group form-group">
						<dt><label for="default_lang"><?php print rex_i18n::msg('multinewsletter_config_defaultlang'); ?></label></dt>
						<dd>
							<?php
								// Sprache Auswahlfeld
								$select_default_lang = new rex_select();
								$select_default_lang->setSize(1);
								$select_default_lang->setName('settings[default_lang]');
								$select_default_lang->addOption(rex_i18n::msg('multinewsletter_config_defaultlang_keine'), -1);
								foreach(rex_clang::getAll() as $rex_clang) {
									$select_default_lang->addOption($rex_clang->getName(), $rex_clang->getId());
								}
								$select_default_lang->setSelected($this->getConfig('default_lang'));
								$select_default_lang->setAttribute('class', 'form-control');
								$select_default_lang->show();
							?>
						</dd>
					</dl>
					<?php
						}
					?>
					<dl class="rex-form-group form-group">
						<dt><label for="unsubscribe_action"><?php print rex_i18n::msg('multinewsletter_config_unsubscribe_action'); ?></label></dt>
						<dd>
							<?php
								// Aktion bei Abmeldung
								$unsubscribe_action_select = new rex_select();
								$unsubscribe_action_select->setSize(1);
								$unsubscribe_action_select->setName('settings[unsubscribe_action]');
								$unsubscribe_action_select->addOption(rex_i18n::msg('multinewsletter_config_unsubscribe_action_delete'), 'delete');
								$unsubscribe_action_select->addOption(rex_i18n::msg('multinewsletter_config_unsubscribe_action_status'), 'status_unsubscribed');
								$unsubscribe_action_select->setSelected($this->getConfig('unsubscribe_action'));
								$unsubscribe_action_select->setAttribute('class', 'form-control');
								$unsubscribe_action_select->show();
							?>
						</dd>
					</dl>
					<dl class="rex-form-group form-group">
						<dt><label for="subscribe_meldung_email"><?php print rex_i18n::msg('multinewsletter_config_subscribe_meldung_email'); ?></label></dt>
						<dd><input class="form-control" id="subscribe_meldung_email" type="email" name="settings[subscribe_meldung_email]" value="<?php echo $this->getConfig('subscribe_meldung_email'); ?>" /></dd>
					</dl>	
				</div>
			</fieldset>

			<fieldset>
				<legend><?php echo rex_i18n::msg('multinewsletter_config_title_serverlimits'); ?></legend>
				<div class="panel-body-wrapper slide">
					<dl class="rex-form-group form-group">
						<dt><label for="expl_config_standards"></label></dt>
						<dd><?php print rex_i18n::msg('multinewsletter_expl_config_standards'); ?></dd>
					</dl>	
					<dl class="rex-form-group form-group">
						<dt><label for="max_mails"><?php print rex_i18n::msg('multinewsletter_config_max_mails'); ?></label></dt>
						<dd><input class="form-control" id="max_mails" type="number" name="settings[max_mails]" value="<?php echo $this->getConfig('max_mails'); ?>" /></dd>
					</dl>	
					<dl class="rex-form-group form-group">
						<dt><label for="versandschritte_nacheinander"><?php print rex_i18n::msg('multinewsletter_config_versandschritte_nacheinander'); ?></label></dt>
						<dd><input class="form-control" id="versandschritte_nacheinander" type="number" name="settings[versandschritte_nacheinander]" value="<?php echo $this->getConfig('versandschritte_nacheinander'); ?>" /></dd>
					</dl>	
					<dl class="rex-form-group form-group">
						<dt><label for="sekunden_pause"><?php print rex_i18n::msg('multinewsletter_config_sekunden_pause'); ?></label></dt>
						<dd><input class="form-control" id="sekunden_pause" type="number" name="settings[sekunden_pause]" value="<?php echo $this->getConfig('sekunden_pause'); ?>" /></dd>
					</dl>	
				</div>
			</fieldset>
			
			<fieldset>
				<legend><?php echo rex_i18n::msg('multinewsletter_config_title_testmails'); ?></legend>
				<div class="panel-body-wrapper slide">
					<dl class="rex-form-group form-group">
						<dt><label for="REX_LINK_3_NAME"><?php print rex_i18n::msg('multinewsletter_config_default_test_article'); ?></label></dt>
						<dd>
							<div class="input-group">
								<input class="form-control" type="text" name="REX_LINK_NAME[3]" value="<?php echo $this->getConfig('default_test_article_name'); ?>" id="REX_LINK_3_NAME" readonly="readonly">
								<input type="hidden" name="REX_INPUT_LINK[3]" id="REX_LINK_3" value="<?php echo $this->getConfig('default_test_article'); ?>">
								<span class="input-group-btn">
									<a href="#" class="btn btn-popup" onclick="openLinkMap('REX_LINK_3', '&amp;category_id=<?php print $this->getConfig('default_test_article'); ?>');return false;" title="<?php print rex_i18n::msg('multinewsletter_config_open_linkmap'); ?>"><i class="rex-icon rex-icon-open-linkmap"></i></a>
									<a href="#" class="btn btn-popup" onclick="deleteREXLink(3);return false;" title="<?php print rex_i18n::msg('multinewsletter_config_remove_link'); ?>"><i class="rex-icon rex-icon-delete-link"></i></a>
								</span>
							</div>
						</dd>
					</dl>
					<dl class="rex-form-group form-group">
						<dt><label for="default_test_anrede"><?php print rex_i18n::msg('multinewsletter_config_default_test_anrede'); ?></label></dt>
						<dd>
							<?php
								// Standardanrede Auswahlfeld
								$testanrede_select = new rex_select();
								$testanrede_select->setSize(1);
								$testanrede_select->setName('settings[default_test_anrede]');
								$testanrede_select->addOption(rex_i18n::msg('multinewsletter_config_lang_title_male'),'0');
								$testanrede_select->addOption(rex_i18n::msg('multinewsletter_config_lang_title_female'),'1');
								if($this->hasConfig('default_test_anrede')) {
									$testanrede_select->setSelected($this->getConfig('default_test_anrede'));
								}
								$testanrede_select->setAttribute('class', 'form-control');
								$testanrede_select->show();
							?>
						</dd>
					</dl>
					<dl class="rex-form-group form-group">
						<dt><label for="default_test_vorname"><?php print rex_i18n::msg('multinewsletter_config_default_test_vorname'); ?></label></dt>
						<dd><input class="form-control" id="default_test_vorname" type="text" name="settings[default_test_vorname]" value="<?php echo $this->getConfig('default_test_vorname'); ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<dt><label for="default_test_nachname"><?php print rex_i18n::msg('multinewsletter_config_default_test_nachname'); ?></label></dt>
						<dd><input class="form-control" id="default_test_nachname" type="text" name="settings[default_test_nachname]" value="<?php echo $this->getConfig('default_test_nachname'); ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<dt><label for="default_test_email"><?php print rex_i18n::msg('multinewsletter_config_default_test_email'); ?></label></dt>
						<dd><input class="form-control" id="default_test_email" type="email" name="settings[default_test_email]" value="<?php echo $this->getConfig('default_test_email'); ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<dt><label for="default_test_sprache"><?php print rex_i18n::msg('multinewsletter_config_default_test_sprache'); ?></label></dt>
						<dd>
							<?php
								// Sprache Auswahlfeld
								$select_default_lang = new rex_select();
								$select_default_lang->setSize(1);
								$select_default_lang->setName('settings[default_test_sprache]');
								foreach(rex_clang::getAll() as $rex_clang) {
									$select_default_lang->addOption($rex_clang->getName(), $rex_clang->getId());
								}
								$select_default_lang->setSelected($this->getConfig('default_lang'));
								$select_default_lang->setAttribute('class', 'form-control');
								$select_default_lang->show();
							?>
						</dd>
					</dl>
				</div>
			</fieldset>

			<?php
				foreach(rex_clang::getAll() as $rex_clang) {
			?>
			<fieldset>
				<legend><?php echo rex_i18n::msg('multinewsletter_config_langname_section') ." ". $rex_clang->getName(); ?></legend>
				<div class="panel-body-wrapper slide">
					<button class="btn btn-save rex-form-aligned preset-button" name="preset" id="preset_button_<?php echo $rex_clang->getId(); ?>" onclick="setVisibility(<?php echo $rex_clang->getId(); ?>)" type="button">
						<?php echo rex_i18n::msg('multinewsletter_config_lang_presets'); ?> </button>

					<ul id="dropdown-<?php echo $rex_clang->getId(); ?>" class="preset-dropdown" data-clang="<?php echo $rex_clang->getId(); ?>">
						<?php
							foreach ($lang_presets as $settings_key => $value) {
								echo '<li data-langpreset-id="' . $settings_key . '"><a href="#' . $settings_key . '" onclick="setVisibility('. $rex_clang->getId() .')">' . $value['language'] . '</a></li>';
							}
						?>
					</ul>

					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_sendername')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_sendername');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_sendername"><?php print rex_i18n::msg('multinewsletter_config_lang_sendername'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_sendername" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_sendername]" value="<?php echo $value; ?>" /></dd>
					</dl>

					<dl class="rex-form-group form-group">
						<dt><label for="lang_anmeldeformular"></label></dt>
						<dd><b><?php print rex_i18n::msg('multinewsletter_config_lang_anmeldeformular'); ?></b></dd>
					</dl>	
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_anrede')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_anrede');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_anrede"><?php print rex_i18n::msg('multinewsletter_config_lang_anrede'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_anrede" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_anrede]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_title"><?php print rex_i18n::msg('multinewsletter_config_title'); ?></label></dt>
						<dd>
							<?php
								// Standardanrede Auswahlfeld
								$standardanrede_select = new rex_select();
								$standardanrede_select->setSize(1);
								$standardanrede_select->setName('settings[lang_'. $rex_clang->getId() .'_title]');
								$standardanrede_select->addOption(rex_i18n::msg('multinewsletter_config_lang_title_male'),'0');
								$standardanrede_select->addOption(rex_i18n::msg('multinewsletter_config_lang_title_female'),'1');
								if($this->hasConfig('lang_'. $rex_clang->getId() .'_title')) {
									$standardanrede_select->setSelected($this->getConfig('lang_'. $rex_clang->getId() .'_title'));
								}
								$standardanrede_select->setAttribute('class', 'form-control');
								$standardanrede_select->show();
							?>
						</dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_title_0')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_title_0');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_title_0"><?php print rex_i18n::msg('multinewsletter_config_lang_title_male'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_title_0" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_title_0]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_title_1')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_title_1');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_title_1"><?php print rex_i18n::msg('multinewsletter_config_lang_title_female'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_title_1" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_title_1]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_grad')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_grad');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_grad"><?php print rex_i18n::msg('multinewsletter_config_lang_grad'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_grad" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_grad]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_firstname')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_firstname');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_firstname"><?php print rex_i18n::msg('multinewsletter_config_lang_firstname'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_firstname" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_firstname]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_lastname')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_lastname');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_lastname"><?php print rex_i18n::msg('multinewsletter_config_lang_lastname'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_lastname" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_lastname]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_email')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_email');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_email"><?php print rex_i18n::msg('multinewsletter_config_lang_email'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_email" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_email]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_select_newsletter')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_select_newsletter');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_select_newsletter"><?php print rex_i18n::msg('multinewsletter_config_lang_select_newsletter'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_select_newsletter" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_select_newsletter]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_compulsory')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_compulsory');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_compulsory"><?php print rex_i18n::msg('multinewsletter_config_lang_compulsory'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_compulsory" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_compulsory]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_subscribe')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_subscribe');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_subscribe"><?php print rex_i18n::msg('multinewsletter_config_lang_subscribe'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_subscribe" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_subscribe]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_action')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_action');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_action"><?php print rex_i18n::msg('multinewsletter_config_lang_action'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_action" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_action]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_safety')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_safety');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_safety"><?php print rex_i18n::msg('multinewsletter_config_lang_safety'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_safety" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_safety]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_status1')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_status1');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_status1"><?php print rex_i18n::msg('multinewsletter_config_lang_status1'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_status1" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_status1]" value="<?php echo $value; ?>" /></dd>
					</dl>

					<dl class="rex-form-group form-group">
						<dt><label for="lang_anmeldeformular_fehler"></label></dt>
						<dd><b><?php print rex_i18n::msg('multinewsletter_config_lang_anmeldeformular_fehler'); ?></b></dd>
					</dl>	
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_no_userdata')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_no_userdata');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_no_userdata"><?php print rex_i18n::msg('multinewsletter_config_lang_no_userdata'); ?></label></dt>
						<dd><textarea class="form-control" name="settings[lang_<?php echo $rex_clang->getId(); ?>_no_userdata]" rows="3" id="lang_<?php echo $rex_clang->getId(); ?>_no_userdata"><?php echo stripslashes($value); ?></textarea></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_invalid_email')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_invalid_email');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_invalid_email"><?php print rex_i18n::msg('multinewsletter_config_lang_invalid_email'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_invalid_email" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_invalid_email]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_invalid_firstname')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_invalid_firstname');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_invalid_firstname"><?php print rex_i18n::msg('multinewsletter_config_lang_invalid_firstname'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_invalid_firstname" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_invalid_firstname]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_invalid_lastname')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_invalid_lastname');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_invalid_lastname"><?php print rex_i18n::msg('multinewsletter_config_lang_invalid_lastname'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_invalid_lastname" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_invalid_lastname]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_send_error')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_send_error');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_send_error"><?php print rex_i18n::msg('multinewsletter_config_lang_send_error'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_send_error" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_send_error]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_software_failure')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_software_failure');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_software_failure"><?php print rex_i18n::msg('multinewsletter_config_lang_software_failure'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_software_failure" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_software_failure]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_nogroup_selected')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_nogroup_selected');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_nogroup_selected"><?php print rex_i18n::msg('multinewsletter_config_lang_nogroup_selected'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_nogroup_selected" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_nogroup_selected]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_already_subscribed')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_already_subscribed');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_already_subscribed"><?php print rex_i18n::msg('multinewsletter_config_lang_already_subscribed'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_already_subscribed" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_already_subscribed]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_confirmation_sent')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_confirmation_sent');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_confirmation_sent"><?php print rex_i18n::msg('multinewsletter_config_lang_confirmation_sent'); ?></label></dt>
						<dd><textarea class="form-control" name="settings[lang_<?php echo $rex_clang->getId(); ?>_confirmation_sent]" rows="3" id="lang_<?php echo $rex_clang->getId(); ?>_confirmation_sent"><?php echo stripslashes($value); ?></textarea></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_confirmsubject')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_confirmsubject');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_confirmsubject"><?php print rex_i18n::msg('multinewsletter_config_lang_confirmsubject'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_confirmsubject" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_confirmsubject]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_confirmcontent')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_confirmcontent');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_confirmcontent"><?php print rex_i18n::msg('multinewsletter_config_lang_confirmcontent'); ?></label></dt>
						<dd><textarea class="form-control" name="settings[lang_<?php echo $rex_clang->getId(); ?>_confirmcontent]" rows="15" id="lang_<?php echo $rex_clang->getId(); ?>_confirmcontent"><?php echo stripslashes($value); ?></textarea></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_already_confirmed')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_already_confirmed');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_already_confirmed"><?php print rex_i18n::msg('multinewsletter_config_lang_already_confirmed'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_already_confirmed" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_already_confirmed]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_invalid_key')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_invalid_key');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_invalid_key"><?php print rex_i18n::msg('multinewsletter_config_lang_invalid_key'); ?></label></dt>
						<dd><textarea class="form-control" name="settings[lang_<?php echo $rex_clang->getId(); ?>_invalid_key]" rows="2" id="lang_<?php echo $rex_clang->getId(); ?>_invalid_key"><?php echo stripslashes($value); ?></textarea></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_confirmation_successful')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_confirmation_successful');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_confirmation_successful"><?php print rex_i18n::msg('multinewsletter_config_lang_confirmation_successful'); ?></label></dt>
						<dd><textarea class="form-control" name="settings[lang_<?php echo $rex_clang->getId(); ?>_confirmation_successful]" rows="5" id="lang_<?php echo $rex_clang->getId(); ?>_confirmation_successful"><?php echo stripslashes($value); ?></textarea></dd>
					</dl>

					<dl class="rex-form-group form-group">
						<dt><label for="lang_abmeldeformular"></label></dt>
						<dd><b><?php print rex_i18n::msg('multinewsletter_config_lang_abmeldeformular'); ?></b></dd>
					</dl>	
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_unsubscribe')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_unsubscribe');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_unsubscribe"><?php print rex_i18n::msg('multinewsletter_config_lang_unsubscribe'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_unsubscribe" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_unsubscribe]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_status0')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_status0');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_status0"><?php print rex_i18n::msg('multinewsletter_config_lang_status0'); ?></label></dt>
						<dd><textarea class="form-control" name="settings[lang_<?php echo $rex_clang->getId(); ?>_status0]" rows="2" id="lang_<?php echo $rex_clang->getId(); ?>_status0"><?php echo stripslashes($value); ?></textarea></dd>
					</dl>

					<dl class="rex-form-group form-group">
						<dt><label for="lang_abmeldeformular_fehler"></label></dt>
						<dd><b><?php print rex_i18n::msg('multinewsletter_config_lang_abmeldeformular_fehler'); ?></b></dd>
					</dl>	
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_already_unsubscribed')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_already_unsubscribed');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_already_unsubscribed"><?php print rex_i18n::msg('multinewsletter_config_lang_already_unsubscribed'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_already_unsubscribed" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_already_unsubscribed]" value="<?php echo $value; ?>" /></dd>
					</dl>
					<dl class="rex-form-group form-group">
						<?php
							$value = '';
							if($this->hasConfig('lang_'. $rex_clang->getId() .'_user_not_found')) {
								$value = $this->getConfig('lang_'. $rex_clang->getId() .'_user_not_found');
							}
						?>
						<dt><label for="lang_<?php echo $rex_clang->getId(); ?>_user_not_found"><?php print rex_i18n::msg('multinewsletter_config_lang_user_not_found'); ?></label></dt>
						<dd><input class="form-control" id="lang_<?php echo $rex_clang->getId(); ?>_user_not_found" type="text" name="settings[lang_<?php echo $rex_clang->getId(); ?>_user_not_found]" value="<?php echo $value; ?>" /></dd>
					</dl>
				</div>
			</fieldset>
			<?php
				}
			?>
		</div>
		<footer class="panel-footer">
			<div class="rex-form-panel-footer">
				<div class="btn-toolbar">
					<button class="btn btn-save rex-form-aligned" type="submit" name="btn_save" value="Speichern"><?php echo rex_i18n::msg('multinewsletter_config_submit'); ?></button>
				</div>
			</div>
		</footer>
	</div>
</form>

<style type="text/css">
	/* Slide fieldsets*/
	div.panel-body legend {
		background: transparent url("<?php echo $this->getAssetsUrl('arrows.png'); ?>") no-repeat 0px 7px;
		padding-left: 19px;
	}
	div.panel-body legend.open {
		background-position: 0px -36px;
	}

	.panel-body-wrapper.slide {
		display: none;
	}

	/* Preset Buttons */
	.preset-button {
		float: right;
		margin-top: -60px;
	}
	.preset-button:after {
		content: "↓";
	}
	.preset-dropdown {
		position: absolute;
		z-index: 100;
		display: none;
		min-width: 160px;
		padding: 5px 20px;
		list-style: none;
		font-size: 14px;
		line-height: 2.5em;
		background-color: #fff;
		border: 1px solid #ccc;
		-webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, .175);
		margin-top: -25px;
		right: 30px;
	}
	.preset-dropdown a {
		color: #324050;
	}
	.preset-dropdown a:hover {
		text-decoration: none;
	}
</style>

<script type="text/javascript">
	function setVisibility(id) {
		if(document.getElementById('dropdown-' + id).style.display === 'inherit'){
			document.getElementById('dropdown-' + id).style.display = 'none';
		} else {
			document.getElementById('dropdown-' + id).style.display = 'inherit';
		}
	}

	jQuery(document).ready(function($) {
		// presets
		var langPresets = <?php echo json_encode($lang_presets); ?>;

		$('ul.preset-dropdown li').click(function(e) {
			var curClang = $(this).parent().attr('data-clang');
			var curLangPresetIndex = $(this).attr('data-langpreset-id');

			$('#lang_' + curClang + '_anrede').val(langPresets[curLangPresetIndex]['anrede']);
			$('#lang_' + curClang + '_title_0').val(langPresets[curLangPresetIndex]['title_0']);
			$('#lang_' + curClang + '_title_1').val(langPresets[curLangPresetIndex]['title_1']);
			$('#lang_' + curClang + '_confirmsubject').val(langPresets[curLangPresetIndex]['confirmsubject']);
			$('#lang_' + curClang + '_confirmcontent').val(langPresets[curLangPresetIndex]['confirmcontent']);
			$('#lang_' + curClang + '_sendername').val(langPresets[curLangPresetIndex]['sendername']);
			$('#lang_' + curClang + '_compulsory').val(langPresets[curLangPresetIndex]['compulsory']);
			$('#lang_' + curClang + '_action').val(langPresets[curLangPresetIndex]['action']);
			$('#lang_' + curClang + '_invalid_email').val(langPresets[curLangPresetIndex]['invalid_email']);
			$('#lang_' + curClang + '_invalid_firstname').val(langPresets[curLangPresetIndex]['invalid_firstname']);
			$('#lang_' + curClang + '_invalid_lastname').val(langPresets[curLangPresetIndex]['invalid_lastname']);
			$('#lang_' + curClang + '_send_error').val(langPresets[curLangPresetIndex]['send_error']);
			$('#lang_' + curClang + '_software_failure').val(langPresets[curLangPresetIndex]['software_failure']);
			$('#lang_' + curClang + '_no_userdata').val(langPresets[curLangPresetIndex]['no_userdata']);
			$('#lang_' + curClang + '_already_unsubscribed').val(langPresets[curLangPresetIndex]['already_unsubscribed']);
			$('#lang_' + curClang + '_already_subscribed').val(langPresets[curLangPresetIndex]['already_subscribed']);
			$('#lang_' + curClang + '_already_confirmed').val(langPresets[curLangPresetIndex]['already_confirmed']);
			$('#lang_' + curClang + '_user_not_found').val(langPresets[curLangPresetIndex]['user_not_found']);
			$('#lang_' + curClang + '_safety').val(langPresets[curLangPresetIndex]['safety']);
			$('#lang_' + curClang + '_status0').val(langPresets[curLangPresetIndex]['status0']);
			$('#lang_' + curClang + '_status1').val(langPresets[curLangPresetIndex]['status1']);
			$('#lang_' + curClang + '_invalid_key').val(langPresets[curLangPresetIndex]['invalid_key']);
			$('#lang_' + curClang + '_confirmation_successful').val(langPresets[curLangPresetIndex]['confirmation_successful']);
			$('#lang_' + curClang + '_confirmation_sent').val(langPresets[curLangPresetIndex]['confirmation_sent']);
			$('#lang_' + curClang + '_email').val(langPresets[curLangPresetIndex]['email']);
			$('#lang_' + curClang + '_firstname').val(langPresets[curLangPresetIndex]['firstname']);
			$('#lang_' + curClang + '_lastname').val(langPresets[curLangPresetIndex]['lastname']);
			$('#lang_' + curClang + '_grad').val(langPresets[curLangPresetIndex]['grad']);
			$('#lang_' + curClang + '_select_newsletter').val(langPresets[curLangPresetIndex]['select_newsletter']);
			$('#lang_' + curClang + '_subscribe').val(langPresets[curLangPresetIndex]['subscribe']);
			$('#lang_' + curClang + '_unsubscribe').val(langPresets[curLangPresetIndex]['unsubscribe']);
			$('#lang_' + curClang + '_nogroup_selected').val(langPresets[curLangPresetIndex]['nogroup_selected']);
    	});

		// slide fieldsets
		$('legend').click(function(e) { 
			$(this).toggleClass('open');
			$(this).next('.panel-body-wrapper.slide').slideToggle();
		});
	});
</script>